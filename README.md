Это репозиторий сервиса подписок (ветка feature) от Ostmind.

Обзор
Сервис подписок — это backend микросервис, отвечающий за управление пользовательскими подписками. Написан на Go, ориентирован на высокую производительность и масштабируемость, использует PostgreSQL для хранения данных.

Возможности
Управление подписками пользователей

Миграции базы данных с помощью встроенного сервиса миграций

Настройка через YAML-файлы конфигурации

HTTP сервер на базе фреймворка Echo

Контейнеризация с использованием Docker

Требования
Go 1.20 и выше

Docker и Docker Compose

PostgreSQL 15 (или совместимая версия)

Swagger документация
Документация по API автоматически генерируется с помощью Swagger и расположена в каталоге docs.

В проекте настроен Swagger UI, который предоставляет удобный веб-интерфейс для просмотра и тестирования API. Интерфейс доступен по адресу:

http://localhost:8080/swagger/index.html 

Использование Swagger позволяет легко ознакомиться с доступными эндпоинтами, их параметрами и ответами, а также тестировать их в браузере, что значительно облегчает взаимодействие с сервисом.

Быстрый старт

Запуск через Docker Compose

bash
git clone https://github.com/Ostmind/subscriptionservice.git
cd subscriptionservice
git checkout feature

docker-compose up --build

Эта команда запустит три сервиса:

subscriptionservice — backend API сервис на порту 8080

migrator — сервис миграций базы данных при старте

db — контейнер с PostgreSQL

Конфигурация

Сервис принимает настройки из YAML-файлов, расположенных в каталоге ./config/. Важные параметры:

Учетные данные и настройки подключения к базе данных

Адрес и порт HTTP-сервера

Параметры логирования и прочее

Доступ к сервису

После запуска сервис доступен по адресу:

http://localhost:8080/subscription/users

Разработка

Сборка сервиса:

bash
go build -o subscriptionservice ./cmd/subscriptionservice

Запуск миграций:

bash
docker-compose run migrator up
Локальный запуск с кастомной конфигурацией:

bash
CONFIG_PATH=./config/local.yaml go run ./cmd/subscriptionservice

Тестирование

Модульные тесты находятся в пакете internal.

Запуск тестов:

bash
go test ./...